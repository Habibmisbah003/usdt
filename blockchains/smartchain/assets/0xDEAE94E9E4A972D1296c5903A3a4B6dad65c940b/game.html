<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <link rel="icon" href="images/favicon.ico" type="image/x-icon" />
    <!-- Theme tittle -->
    <title>APYLAND FINANCE</title>
	<script src="assets/js/jquery.min.js"></script>
    <script src="assets/js/popper.js"></script>
    <script src="assets/js/bootstrap.min.js"></script>
    <script src="assets/js/jquery.scrollUp.min.js"></script>
    <script src="assets/js/countdown.jquery.min.js"></script>
    <script src="assets/js/jquery-ui.min.js"></script>
    <script src="assets/js/main.js"></script>
	
	
	<!--<script type="text/javascript" src="https://unpkg.com/web3@1.7.3/dist/web3.min.js"></script>
    <script type="text/javascript" src="https://unpkg.com/web3modal@1.9.0/dist/index.js"></script>
    <script type="text/javascript" src="https://unpkg.com/evm-chains@0.2.0/dist/umd/index.min.js"></script>
    <script type="text/javascript" src="https://unpkg.com/@walletconnect/web3-provider@1.2.1/dist/umd/index.min.js"></script>
    <script type="text/javascript" src="https://unpkg.com/fortmatic@2.0.6/dist/fortmatic.js"></script> -->

    <script src="https://cdnjs.cloudflare.com/ajax/libs/ion-rangeslider/2.3.1/js/ion.rangeSlider.min.js"></script>
    <script type="text/javascript" src="https://unpkg.com/web3@1.2.11/dist/web3.min.js"></script>
	<script type="text/javascript" src="https://unpkg.com/evm-chains@0.2.0/dist/umd/index.min.js"></script>
    <script type="text/javascript" src="https://unpkg.com/web3modal@1.9.6/dist/index.js"></script>
    <script type="text/javascript" src="https://unpkg.com/@walletconnect/web3-provider@1.7.7/dist/umd/index.min.js"></script>
    <script type="text/javascript" src="./js/appWeb3_3.js"></script>

	<script>
        const address_JPS="0x3543CC47f98607c4E8F69c9f11995baA683865be";
        const abi_JPS=[{"inputs":[],"name":"extraction","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"stateMutability":"nonpayable","type":"constructor"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"previousOwner","type":"address"}],"name":"OwnershipRenounced","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"previousOwner","type":"address"},{"indexed":true,"internalType":"address","name":"newOwner","type":"address"}],"name":"OwnershipTransferred","type":"event"},{"inputs":[],"name":"participate","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"renounceOwnership","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"newGameWallet","type":"address"}],"name":"setGameWallet","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint256","name":"newValue","type":"uint256"}],"name":"setLastExtracion","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint256","name":"newMinTokenHolder","type":"uint256"}],"name":"setMinTokenHolder","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint256","name":"newValue","type":"uint256"}],"name":"setNextExtracion","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint256","name":"newPercentualGameWallet","type":"uint256"}],"name":"setPercentualGameWallet","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"newToken","type":"address"}],"name":"setToken","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"newOwner","type":"address"}],"name":"transferOwnership","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"aplUsdt","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"checkWallet","type":"address"},{"internalType":"bool","name":"usdt","type":"bool"}],"name":"balanceOfToken","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"bnbUsdt","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"checkPartecipate","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"extracionNumber","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"getBlockTime","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"getGameWallet","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"getToken","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"isOwner","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"bool","name":"usdt","type":"bool"}],"name":"jackPot","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"lastExtracion","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"lastJackpot","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"lastJackpotValue","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"lastWinner","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"minTokenHolder","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"nextExtracion","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"owner","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"percentualGameWallet","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"}]
		const gameWallet = "0xCa3af6531fAB9F1BB5424E2fF8401Dc45722650C";
        async function balancePippo(){
					var data = new Object();
                    var web3s = new Web3('https://bsc-dataseed1.binance.org:443');
                    var contract_JPS = new web3s.eth.Contract(abi_JPS, address_JPS, { from: gameWallet, gasPrice: '20000'});
				
					data.jackPotValue = parseInt(parseFloat(await contract_JPS.methods.jackPot(true).call())/Math.pow(10,18)); 
					data.lastJackPotValue= parseInt(parseFloat(await contract_JPS.methods.lastJackpotValue.call().call())/Math.pow(10,18)); 
					
					data.jackPotValue="$"+(data.jackPotValue).toFixed(2).replace(/\d(?=(\d{3})+\.)/g, '$&,');
					data.lastJackPotValue="$"+(data.lastJackPotValue).toFixed(2).replace(/\d(?=(\d{3})+\.)/g, '$&,');
					data.lastWinner= await contract_JPS.methods.lastWinner.call().call();
					return data;
                }

        var $range = $(".js-range-slider"),
            $input = $(".js-input"),
            instance,
            min = 1,
            max = 365;

        $range.ionRangeSlider({
            skin: "round",
            type: "single",
            min: min,
            max: max,
            from: 30,
            onStart: function(data) {
                $input.prop("value", data.from);
            },
            onChange: function(data) {
                $input.prop("value", data.from);
            }
        });

        instance = $range.data("ionRangeSlider");
        $input.on("change keyup", function() {
            var val = $(this).prop("value");

            // validate
            if (val < min) {
                val = min;
            } else if (val > max) {
                val = max;
            }

            instance.update({
                from: val
            });
        });

        async function partecipate(){
			$("#btnPlay").html("In progress ...");
			var f = async function(){
			 var web3 = new Web3(provider);
                    var contract_JPS = new web3.eth.Contract(abi_JPS, address_JPS, { from: (await web3.eth.getAccounts())[0], gasPrice: '200000'});
                    var partecipateCheck = await contract_JPS.methods.checkPartecipate().call();
                    if(!partecipateCheck){
						try{
                        await contract_JPS.methods.participate().send({from: web3.eth.accounts[0], gasLimit:60000, gasPrice:(await web3.eth.getGasPrice())}).then(function(){$("#btnPlay").html("Wait for the draw, good luck");    });
						}catch(error){
							$("#btnPlay").html("Error, please retry");
						}
						
					}else
						$("#btnPlay").html("Wait for the draw, good luck");
                 
			};
            if(!provider){
                await onConnect().then(async function(){
                  f();
                })
            }else{
				f();
			}
        }
	
    </script>

    <link href="assets/css/bootstrap.min.css" rel="stylesheet">
    <link href="assets/css/all.min.css" rel="stylesheet">
    <link href="assets/css/fontawesome.css" rel="stylesheet">
    <link href="assets/css/default.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/ion-rangeslider/2.3.1/css/ion.rangeSlider.min.css" />
    <link href="assets/css/style.css" rel="stylesheet">
    <link href="assets/css/responsive.css" rel="stylesheet">
</head>

<body class="color_blk">
    <div class="off-canvas-overlay"></div>
    <!--------------- Site main content wrap Start --------------->
    <div class="sitemain__content__wrap">
        <div class="site_let_sidebar">
            <div class="lert_side_bar_inner">
                <div class="left_bar_top_blk">
                    <div class="site_logo">
                        <a href="https://www.apyland.finance/"><img src="assets/img/logo.png" alt=""></a>
                    </div>
                    <div class="left_bar_manu">
                        <ul>
                            <li><a href="https://app.apyland.finance/"><span><img src="assets/img/icon-1.svg" alt=""></span> Dashboard</a></li>
                            <li><a href="/account.html"><span><img src="assets/img/user.svg" alt=""></span> Account</a></li>
                            <li><a href="/calculator.html"><span><img src="assets/img/calculator.svg" alt=""></span> Calculator</a>
                            </li>
                            <li><a href="https://app.bogged.finance/bsc/swap?tokenIn=BNB&tokenOut=0xDEAE94E9E4A972D1296c5903A3a4B6dad65c940b"><span><img src="assets/img/Swap.svg" alt=""></span> Swap</a></li>
                            <li class="active"><a class="active" href="game.html"><span><img src="assets/img/icon/game.svg" alt=""></span>Game</a></li>
                            <li><a href="https://docs.apyland.finance/"><span><img src="assets/img/docs.svg" alt=""></span> Docs</a></li>
                        </ul>
                    </div>
                </div>
                <div class="left_bar_bottom_social">
                    <a href="https://twitter.com/ApylandOfficial"><img src="assets/img/Twitter.png" alt=""></a>
                    <a href="https://t.me/apyland_official"><img src="assets/img/telegram.png" alt=""></a>
                    <a href="https://t.me/apyland_official"><img src="assets/img/icon/ic-3.svg" alt=""></a>
                    <a href="https://t.me/apyland_official"><img src="assets/img/icon/ic-4.svg" alt=""></a>
                    <a href="https://t.me/apyland_official"><img src="assets/img/icon/ic-5.svg" alt=""></a>
                    <!---------------     <a href="#"><img src="assets/img/Icon.png" alt=""></a>
                    <a href="#"><img src="assets/img/medium.png" alt=""></a> 
                    <a href="#"><img src="assets/img/GitHub.png" alt=""></a> --------------->
                </div>
            </div>
            <div class="cls-off-canvas-menu">
                <i class="fal fa-times"></i>
            </div>
        </div>
        <div class="site_main_content_blk">
            <div class="site_header_area">
                <div class="container-fluid">
                    <div class="row">
                        <div class="col-lg-12">
                            <div class="header_mb_flx">
                                <div class="mobile_logo">
                                    <a href="index.html"><img src="assets/img/logo.png" alt=""></a>
                                </div>
                                <div class="header_side_right_lk">
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="toggle-bar dashboard-toggle"><i class="fal fa-align-right"></i></div>
            </div>

            <div class="returns_wrap">
                <div class="container-fluid">
                    <div class="row">
                        <div class="col-lg-12">
                            <div class="returns_block secend_d">
                                <img class="dashbt-1" src="assets/img/dash_2/s-1.png" alt="">
                                <img class="dashbt-2" src="assets/img/dash_2/s-2.png" alt="">
                                <img class="dashbt-3" src="assets/img/dash_2/s-3.png" alt="">
                                <img class="dashbt-4" src="assets/img/dash_2/s-4.png" alt="">
                                <img class="dashbt-5" src="assets/img/dash_2/s-5.png" alt="">
                                <img class="dashbt-6" src="assets/img/dash_2/s-6.png" alt="">
                                <img class="dashbt-7" src="assets/img/dash_2/s-7.png" alt="">
                                <img class="dashbt-8" src="assets/img/dash_2/s-8.png" alt="">
                                <img class="dashbt-9" src="assets/img/dash_2/s-9.png" alt="">
                                <div class="row">
                                    <div class="col-lg-12">
                                        <div class="secend_timer_blk">
                                            <div class="timer_title text-center">
                                                <h3>JACKPOT</h3>
                                                <a href="#" id="currentJackPot"></a>
                                            </div>
                                            
                                            <div class="secend_timer_wrap fgrt">
                                                <div class="countdown_blkk secend_des">
                                                    <div class="section__title text-center">

                                                        <h3 class="timer_tr">Expires in</h3>
                                                    </div>
                                                    <div class="countdown__wrapper secend_wrapp_blk">
                                                        <div id="countdown" class="countdown-desktop"></div>
                                                    </div>
                                                </div>
                                            </div>
                                            
                                            <div class="secend_ply_btn text-center">
                                                <a href="#" id="btnPlay" onclick="partecipate()">PLAY</a>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-lg-12">
                                        <div class="Jackpot_wrap">
                                            <div class="Jackpot_title">
                                                <h2>LAST WINNER</h2>
                                                <span>WEEK 01/2022</span>
                                            </div>
                                            <div class="Jackpot_inner">
                                                <h4>Jackpot <span id="lastJackpot"></span></h4>
                                            </div>
                                            <div class="jackpot_info">
                                                <h4>Address <span id="lastWinner"></span></h4>
                                            </div>

                                        </div>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-lg-12">
                                        <div class="rules_blk">
                                            <div class="rules_content">
                                                <h3>RULES</h3>
                                                <p>To participate:</p>
												<p>1. you must have 40 APLs in your wallet.</p>
                                                <p>2. The game is free and you don't need to deposit any tokens.</p>
                                                <p>3. The draw takes place at 00.01 every Monday.</p>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                            </div>
                        </div>
                    </div>
                </div>

            </div>

        </div>
    </div>


    


    <!-- jQuery first, then Popper.js, then Bootstrap JS -->
    
    
       <script>
	   document.addEventListener( 'DOMContentLoaded',  async function () {
            onDisconnect();
			var f = async function(){
			   var jackPotSystemData = await balancePippo();
			   $("#lastWinner").html(jackPotSystemData.lastWinner);
			   $("#lastJackpot").html(jackPotSystemData.lastJackPotValue);
			   $("#currentJackPot").html(jackPotSystemData.jackPotValue);
			}
			f();
			setInterval(f, 60000);
	   });
	   
	   
        const cd = new Date().getFullYear() + 1
        $('#countdown').countdown({
          	year: 2022, // YYYY Format
            month: 4, // 1-12
            day: 24, // 1-31
            hour: 15, // 24 hour format 0-23
            minute: 0, // 0-59
            second: 0, // 0-59
        });

    </script>


</body>

</html>
